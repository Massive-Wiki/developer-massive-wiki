<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Massive Wiki Wednesday, 2025-06-16 - Developer Wiki (Massive Wiki)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/developer-massive-wiki/mwb-static/css/style.css">
    <link rel="stylesheet" href="/developer-massive-wiki/mwb-static/css/custom.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js"></script>
    <script src="/developer-massive-wiki/lunr-index-1752094039.9313025.js"></script>
    <script>var index = lunr.Index.load(lunr_index)</script>
    
    
    <script src="/developer-massive-wiki/lunr-posts-1752094039.9313025.js"></script>
    <script> function randomPageLink() { return "/developer-massive-wiki"+lunr_posts[Math.floor(Math.random() * lunr_posts.length)].link; } </script>
    
  </head>
<body>
  <div id="header">
    <span id="hamburger-btn"
    class="hidden">&#9776;</span><a class="button is-light" id="header-link" href="/developer-massive-wiki/index.html">Developer Wiki (Massive Wiki)</a>
  </div>

  <div class="container" id="flex-container">
    <div id="side-column">
      <div>
        <button id="hide-btn">Hide</button>
        <button id="move-btn" class="hidden">Move to Sidebar</button>
      </div>
      <p>(we are switching to a new theme,<br />
don't worry if things look different for a while!)</p>
<h2>Site Navigation</h2>
<div class="navlinks">
<ul>
<li><a class="wikilink" href="/developer-massive-wiki/nxc-docs/README.html">HOME</a></li>
<li><a href="/developer-massive-wiki/search.html">SEARCH</a></li>
<li><a href="/developer-massive-wiki/all-pages.html">ALL PAGES</a></li>
<li><a href="/developer-massive-wiki/recent-pages.html">RECENT CHANGES</a></li>
</ul>
</div>
<div class="navlinks">
  <button onclick="location.href=`${randomPageLink()}`">
    RANDOM PAGE
  </button>
</div>
<h2>Plans</h2>
<p><a class="wikilink" href="/developer-massive-wiki/Massive_Wiki_Roadmap.html">Massive Wiki Roadmap</a><br />
<a class="wikilink" href="/developer-massive-wiki/Pier2Pier.html">Pier2Pier</a><br />
<a class="wikilink" href="/developer-massive-wiki/Massive_Wiki_Builder_redesign_notes_and_plans.html">Massive Wiki Builder redesign</a></p>
<h2>For Testing</h2>
<p><a class="wikilink" href="/developer-massive-wiki/Link_workbench/testdir/wiki_link_test_page.html">wiki link test page</a><br />
<a class="wikilink" href="/developer-massive-wiki/Mistletoe_parser_test_page.html">Mistletoe parser test page</a><br />
<a class="wikilink" href="/developer-massive-wiki/MWB_upgrade_notes/Mistletoe_&_the_ampersand_story.html">Mistletoe & the ampersand story</a></p>

    </div>

    <div id="main-column">
      
      <div> <!-- edit this page button -->
	<p style="float:right; margin:.5em .5em
	.5em"><a target="_blank" href="https://github.com/Massive-Wiki/developer-massive-wiki/edit/main/Meetings/Massive Wiki Wednesday, 2025-06-16.md"
	class="edit-this-page-button">Edit on GitHub</a></p>
	<br clear="all">
      </div> <!-- edit this page button -->
      
      <h1>Massive Wiki Wednesday, 2025-06-16</h1>
<h2>Turning a cleaned URL back into a path</h2>
<ol>
<li>zsh pattern matching on words</li>
<li>use a dict that maps cleaned URL back to path
a. before creating a new entry, check if the cleaned path exists already, and if so, "increment" the clean path (i.e., test_page, test_page_2, test_page_3)</li>
<li>write the original path into the HTML page in a comment, e.g., <code>&lt;!-- original_path_urlencoded="test%2c%20.md" --&gt;</code>
a. or into an invisible div with a particular class name
b. or into the corresponding JSON file holding the frontmatter metadata (but then we're sort of corrupting the front matter)
c. best way: <code>&lt;meta name="original-filename" content="test%2c%20.md"&gt;</code> (or <code>original-filepath</code> or whatever)</li>
</ol>
<p>We like #3.</p>
<p>For reference: Claude conversation about 3abc: <a href="https://claude.ai/share/ea5f22fb-df92-423f-8dba-b97dd9da0404">HTML Metadata Storage: Comments vs DOM vs Meta Tags for Filename Preservation</a></p>
<hr />
<p>from Pete:</p>
<p>I used Claude Code to spec and write a proof-of-concept React app that:</p>
<ul>
<li>reads an HTML file at a URL the user inputs</li>
<li>reads the "meta" variables specifying repo URL and filepath</li>
<li>uses OAuth "Device Flow" to authenticate into GitHub</li>
<li>modifies the target file in Git to add an HTML comment</li>
</ul>
<p>It works! is the good news.</p>
<p>The bad news is that an OAuth App on GitHub can't specify a particular repo to have write access to, it can only ask for either write access to all your public repos, or write access for all your public and private repos. So, that's too much to ask for, and we don't want to have it work that way.</p>
<p>The answer is to either use a GitHub App (but then the user has to install the app once before it can grant permissions for a particular repo, think of the way Netlify works), or, a Personal Access Token.</p>
<p>I could demo the current app for you at some point, or you can try it yourself:</p>
<p>https://bscomment-edit.netlify.app/</p>
<p>(It's named "bsComment Edit", but it's just a prototype, I didn't mean it would end up being the actual Commenting app.)</p>
<p>You'll need to give it the web URL of an HTML that has the metadata set up, and then a repo where it can edit that file. (And permit the "bsComment" app to have write access to at least all your public repos.)</p>
<p>Here's the source code if you want to check it out:</p>
<p>https://github.com/peterkaminski/bscomment-edit</p>
<p>Another thing I learned is that because of CORS restrictions, the React app can't directly access the GitHub API, you have to use a CORS proxy somewhere (or use Electron, a similar problem with TheBrain API is why I used Electron for Mark). In this app, there's a Netlify serverless function that serves as the CORS proxy, which works fine. Some amount of serverless functions can be called for free on Netlify.</p>
<hr />

      
    </div>
  </div>
  <footer class="footer">
  <div class="content has-text-centered">
    <div><strong>Developer Wiki (Massive Wiki)</strong> by the Massive Wiki Team.</div>
    <div>Central repository at <a href="https://github.com/Massive-Wiki/developer-massive-wiki">developer-massive-wiki</a>.</div>
    <div>Licensed under <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</div>
    <div><em>Site last updated on Wednesday, July 09, 2025 at 20:47 UTC.</em></div>
  </div>
</footer>
  <script src="/developer-massive-wiki/mwb-static/js/script.js"></script>
</body>
</html>